<link rel="import" href="/lib/components/polymer/polymer.html">
<link rel="import" href="/lib/components/ajax-form/ajax-form.html">
<link rel="import" href="/lib/components/core-ajax/core-ajax.html">
<link rel="import" href="/lib/components/core-localstorage/core-localstorage.html">

<link rel="import" href="/lib/components/paper-button/paper-button.html">
<link rel="import" href="/lib/components/paper-dialog/paper-dialog.html">
<link rel="import" href="/lib/components/paper-input/paper-input-decorator.html">
<link rel="import" href="/lib/components/paper-input/paper-autogrow-textarea.html">

<link rel="import" href="/lib/components/lancie-input/lancie-input.html">

<polymer-element name="lancie-login-form" attributes="">
  <template>
    <core-localstorage name="lancie-myarea-storage" value="{{userdata}}"></core-localstorage>
    <core-ajax
      id="loginAJAX"
      method="POST"
      params='{
          "username": "{{username}}",
          "password": "{{password}}"
      }'
      url="/api/login/create/session/"
      handleAs="json"
      on-core-response="{{handleResponse}}"></core-ajax>

    <paper-dialog backdrop id="loginForm" transition="core-transition-top" 
      style="width: {{isPhone ? 'calc(100vw)' : '600px'}};">

      <h1>Login</h1>

      <form action="" style="padding: 0 24px; margin-bottom: 20px;">
        <lancie-input label="Username" value="{{username}}" id="username"></lancie-input>
        <lancie-input label="Password" value="{{password}}" type="password" id="password"></lancie-input>
        
        <div class="buttons" horizontal end-justified layout center>
          <paper-button raised on-click="{{submit}}">LOGIN</paper-button>
        </div>
      </form>

    </paper-dialog>
  </template>

  <script src="lancie-login-form.js"></script>
</polymer-element>