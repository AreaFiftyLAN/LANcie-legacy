<polymer-element name="countdown-element" attributes="isphone">
  <template>

    <core-media-query query="max-width: 851px" queryMatches="{{isTablet}}"></core-media-query>
    <core-media-query query="max-width: 581px" queryMatches="{{isPhone}}"></core-media-query>
    

    <style type="text/css">
    :host paper-shadow {
      margin: auto 10px;
    }
    :host paper-shadow.isPhone {
      margin: auto 3px;
    }
    :host paper-shadow.isTablet {
      margin: auto 5px;
    }
    :host .countdown-item {
      padding: 0 15px 15px;

      background-color: rgba(55, 88, 140, 0.7);
      color: rgba(255, 255, 255, 1);
      font-family: RobotoDraft, Helvetica, Arial, sans-serif !important;
    }
    :host .countdown-item div {
      text-align: center;
    }
    :host .countdown-item div h1 {
      font-size: 7em !important;  
      padding-bottom: 0 !important;
      line-height: 1em !important;
      font-weight: bold !important;
      font-family: RobotoDraft, Helvetica, Arial, sans-serif !important;
    }
    :host .countdown-item span {
      color: #ffe574 !important;
    }
    :host .countdown-item.isTablet {
      padding: 0 7px 7px;
    }
    :host .countdown-item.isTablet div h1 {
      margin: 10px 5px 5px 5px !important;
      font-size: 5em !important;
      font-weight: 600 !important;
    }
    :host .countdown-item.isTablet.isPhone {
      padding: 0 7px 7px;
    }
    :host .countdown-item.isTablet.isPhone div h1 {
      margin: 10px 5px 5px 5px !important;
      font-size: 2.5em !important;
      font-weight: 600 !important;
    }
    :host .countdown-item.isTablet.isPhone span {
      font-size: 11px;
    }
    </style>
    
    <div flex horizontal layout center-justified>
      <paper-shadow class="{{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" z="2">
        <div class="countdown-item {{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" layout vertical>
          <div id="days" horizontal layout center-justified center>
            <h1>{{days}}</h1>
          </div>
          <span horizontal layout center-justified center>days</span>
        </div>
      </paper-shadow>
      
       <paper-shadow class="{{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" z="2">
        <div class="countdown-item {{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" layout vertical>
          <div id="hours" horizontal layout center-justified center>
            <h1>{{hours}}</h1>
          </div>
          <span horizontal layout center-justified center>hours</span>
        </div>
      </paper-shadow>

       <paper-shadow class="{{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" z="2">
        <div class="countdown-item {{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" layout vertical>
          <div id="minutes" horizontal layout center-justified center>
            <h1>{{minutes}}</h1>
          </div>
          <span horizontal layout center-justified center>minutes</span>
        </div>
      </paper-shadow>

       <paper-shadow class="{{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" z="2">
        <div class="countdown-item {{isTablet ? 'isTablet' : ''}} {{isPhone ? 'isPhone' : ''}}" layout vertical>
          <div id="seconds" horizontal layout center-justified center>
            <h1>{{seconds}}</h1>
          </div>
          <span horizontal layout center-justified center>seconds</span>
        </div>
      </paper-shadow>
    </div>
  </template>

  <script>
    Polymer("countdown-element", {

      end: "2015-03-30T22:59:59",

      time: null,
      dateStr: "",
      days: "",
      hours: "",
      minutes: "",
      seconds: "",

      countHours: "0",
      countMinutes: "0",
      countSeconds: "0",

      ready: function() {
        if (this.hasAttribute('end')) {
          this.end = this.getAttribute('end');
        }
        this.startUpCounter();
      },

      startUpCounter: function() {
        var animation, till, _day, _hour, _minute, _second;

        var convertedTime = new Date(this.end);
        this.time = new Date();
        till = convertedTime - this.time;

        _second = 1000;
        _minute = _second * 60;
        _hour = _minute * 60;
        _day = _hour * 24;

        this.days = Math.floor(till / _day);
        this.hours = Math.floor((till % _day) / _hour);
        this.minutes = Math.floor((till % _hour) / _minute);
        this.seconds = Math.floor((till % _minute) / _second);

        if (this.days < 10) this.days = "0" + this.days;
        if (this.hours < 10) this.hours = "0" + this.hours;
        if (this.minutes < 10) this.minutes = "0" + this.minutes;
        if (this.seconds < 10) this.seconds = "0" + this.seconds;

        this.countHours = 23 - this.hours;
        this.countMinutes = 59 - this.minutes;
        this.countSeconds = 59 - this.seconds;

        this.secondDown();
      },

      secondDown: function() {
        if (this.seconds-- <= 10) { this.seconds = "0" + this.seconds; }

        if (this.countSeconds++ >= 59) {
          this.minuteDown();
          this.seconds = 59;
          this.countSeconds = 0;
        }
        this.async(this.secondDown, null, 1000);
      },

      minuteDown: function() {
        if (this.minutes-- <= 10) {
          this.minutes = "0" + this.minutes;
        }

        if (this.countMinutes++ >= 59) {
          this.hourDown();
          this.minutes = 59;
          this.countMinutes = 0;
        }
      },

      hourDown: function() {
        if (this.hours-- <= 10) {
          this.hours = "0" + this.hours;
        }

        if (this.countHours++ >= 23) {
          this.dayDown();
          this.hours = 23;
          this.countHours = 0;
        }
      },

      dayDown: function() {
        if (this.days-- <= 10) {
          this.days = "0" + this.days;
        }
      },
    });
  </script>
</polymer-element>